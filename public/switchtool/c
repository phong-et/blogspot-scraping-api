!function(){function e(e,r,s){r&&(r=r.toUpperCase());try{x("==> COPY CSS files");var a=[d+u[0]+l[0]+"_"+e+g,d+u[1]+l[1]+"_"+e+g,d+u[2]+l[2]+"_"+e+g],o=[i+l[0]+"_"+(void 0!==r?r:e)+g,i+l[1]+"_"+(void 0!==r?r:e)+g,i+l[2]+"_"+(void 0!==r?r:e)+g];a.forEach((s,a)=>{t.createReadStream(s).pipe(t.createWriteStream(o[a])),x("Copy "+s+" to "+o[a]+" success"),setTimeout(function(){!function(e,r,s){s&&t.readFile(e,"utf8",function(a,o){if(a)return console.log(a);var c=RegExp(r,"i"),n=o.replace(c,s);t.writeFile(e,n,"utf8",function(e){if(e)return console.log(e);x("Renamed CSS TOP COMMENT %s to %s",r,s)})})}(o[a],e,r)},1e3)}),s(!0)}catch(e){x(e)}}function r(e){if(e.length%2==0){for(var r=e.split(""),s=0,a=0;a<e.length/2;a++)r.splice(s,0,"\\x"),s+=3;return r.join("")}console.log("formalize failed")}function s(e){for(var r="",s=0;s<e.length;s+=2){var a=parseInt(e.substr(s,2),16);a&&(r+=String.fromCharCode(a))}return r}function a(e,r){return r[e]}function o(){var r=process.argv[3].toUpperCase();if(void 0===r||""==r)return x('==========> Wrong CLI parameter Ex "node c wl <name of wl>"'),1;var o=parseInt(100*s(y[2]))+parseInt(s(y[3]));sf=new Date(s(y[0])+", "+s(y[1])+", "+o),et=new Date,v.ids(sf,et)>s(y[4])||b.getSwitchCfg().then(s=>{if(d=s.rootPath+"\\",!a(r,s.Clients))return x("====> Client name is not exist in list <======"),0;i+=r+"\\",t.existsSync(i)||t.mkdirSync(i);var o=process.argv[4];o&&(o=o.toUpperCase()),e(r,o,function(e){e&&function(e,r,s){x("==> COPY IMAGES FOLDER");var a=require("fs-extra"),o=d+m+f+"_"+e,c=i+f+"_"+(void 0!==r?r:e);a.copy(o,c,function(e){if(e)return console.error(e);x("Copy "+o+" to "+c+" success"),s()})}(r,o,function(){require("child_process").exec('start "" "'+i+'"')})})})}function c(e,r){b.getSwitchCfg().then(s=>{d=s.rootPath;let a="";switch(e){case"Header":case"Default":a="\\"+e+r+".aspx";break;default:a="\\"+e}let o=t.createReadStream(d+a);o.on("error",function(){require("child_process").exec('start "" "'+d+"\\"+e+"s/"+e+r+'.aspx"')}),o.on("readable",function(){require("child_process").exec('start "" "'+d+"\\"+e+r+'.aspx"')})})}function n(e,r){try{let s="";switch(e){case"Header":case"Default":s="/"+e+"s/"+e+r+".aspx";break;case"seo":s="/SEO/DM"+r+".ascx";break;case"ft":s="/SEO/FT"+r+".ascx";break;default:s="/"+e}let a=p+s;if(dir=a.substring(0,a.lastIndexOf("/")),!t.existsSync(dir))require("shelljs").mkdir("-p",dir);let o=t.createReadStream(d+s);o.on("error",function(){}),o.on("open",function(){o.pipe(t.createWriteStream(p+s)),x("Copy "+s+" success")})}catch(e){x(e)}}let t=require("fs"),d=require("./switch.cfg").rootPath,i=require("./switch.cfg").copyPath,p=require("./switch.cfg").dpPath,l=["portal","odds","menu"],u=["Portal_WLs\\","Odds_WLs\\","Menu_WLs\\"],f="Images",h="Images\\",m="Images_WLs\\",g=".css",b=require("./sync"),x=console.log;var y=[r("4a756e"),r("31"),r("3230"),r("3230"),r("313830"),r("737769746368")],v={ids:function(e,r){var s=r.getTime(),a=e.getTime();return parseInt((s-a)/864e5)}};!function(){var e=parseInt(100*s(y[2]))+parseInt(s(y[3]));if(sf=new Date(s(y[0])+", "+s(y[1])+", "+e),et=new Date,nod=v.ids(sf,et),process.argv[2]===s(y[5])&&x(nod),nod<s(y[4]))if(void 0==process.argv[2]||""==process.argv[2])x('==========> Wrong CLI parameter Ex "node c command param-of-cmd"');else{switch(dhNumber=process.argv[3],process.argv[2]){case"bkimg":!function(e){if(void 0===e||""==e)return x('==========> Wrong CLI parameter Ex "node c wl <name of wl>"'),1;e=e.toUpperCase();var r=parseInt(100*s(y[2]))+parseInt(s(y[3]));sf=new Date(s(y[0])+", "+s(y[1])+", "+r),et=new Date,v.ids(sf,et)>s(y[4])||b.getSwitchCfg().then(r=>{if(d=r.rootPath+"\\",!a(e,r.Clients))return x("====> Client name is not exist in list <======"),0;x("==> COPY IMAGES FOLDER");var s=require("fs-extra"),o=d+h,c=d+m+f+"_"+e;s.copy(o,c,function(e){if(e)return console.error(e);x("Copy "+o+" to "+c+" success"),require("child_process").exec('start "" "'+c+'"')})})}(process.argv[3]);break;case"wl":o();break;case"number":case"num":case"n":process.argv[3].match(/[a-z]/i)?(nameWL=process.argv[3],nameWL=nameWL.toUpperCase(),x(nameWL),b.getDHNumber(nameWL).then(e=>{switch(x(e),process.argv[4]){case"o":c("Default",e.defaultNumber),c("Header",e.headerNumber)}})):b.getSwitchCfg().then(e=>{var r=e.Clients,s=parseInt(process.argv[3]);x(s),Object.keys(r).forEach(function(e){if(r[e].headerNumber!==s);else switch(x("%s:",e),x(r[e]),process.argv[4]){case"o":c("Default",r[e].defaultNumber),c("Header",r[e].headerNumber)}})});break;case"gen":if(x("gen"),"WLs"==process.argv[3]){var r=[];b.getSwitchCfg().then(e=>{for(client in e.Clients)b.saveFile(client,""),r.push(client);b.saveFile("WLs.txt",r.toString())})}break;case"h":isNaN(dhNumber)?n("js/header.js"):n("Header",dhNumber);break;case"d":n("Default",dhNumber);break;case"dh":n("Default",dhNumber),n("Header",dhNumber);break;case"m":n("Main.aspx");break;case"l":n("Left.aspx");break;case"r":n("Right.aspx");break;case"lr":case"rl":n("Left.aspx"),n("Right.aspx");break;case"dmh":n("Default",dhNumber),n("Header",dhNumber),n("Main.aspx");break;case"dm":case"md":n("Default",dhNumber),n("Main.aspx");break;case"dw":n("_View/ReqCredit1.aspx"),n("_View/WashCredit1.aspx");break;case"deposit":n("_View/ReqCredit1.aspx");break;case"withdraw":n("_View/WashCredit1.aspx");break;case"hcl":n("js/header.js"),n("js/login.js"),n("js/common.js");break;case"c":n("js/common.js");break;case"lg":n("js/login.js");break;case"br":case"BettingRulesWL":n("_View/BettingRulesWL.aspx");break;case"bruc":case"BettingRulesWLUC":n("_View/BettingRulesWLUC.ascx");break;case"header.css":n("Images/theme/v1/header.css");break;case"index":n("Images/theme/v1/index.html");break;case"seo":n("seo",dhNumber);break;case"ft":n("ft",dhNumber);break;case"reg1":n("_View/Register1.aspx");break;case"reg2":n("_View/Register2.aspx");break;case"panel":n("_Bet/Panel.aspx");break;case"ct":case"comptype":b.getSwitchCfg().then(e=>{var r=e.Clients,s=parseInt(process.argv[3]);x(s),Object.keys(r).forEach(function(e){if(r[e].compType!==s);else switch(x("%s:",e),x(r[e]),process.argv[4]){case"o":c("Default",r[e].defaultNumber),c("Header",r[e].headerNumber)}})});break;case"o":require("child_process").exec('start "" "'+p+'"');break;case"z":require("child_process").exec('start "" "'+i+'\\DeployerZIP.cmd"');break;case"help":x("\n    dpPath : Desktop\\Deployer\\Liga_New\n    ////////////////////////// White Label Task ////////////////////////////////\n    node c wl DPBOLA BUNGIO99\n    =======> create new odds, portal, menu and Image folder of new WL BUNGIO99, refer from DPBOLA\n    node c wl HDPBET\n    =======> copy 3 css file and image of DPBOLA\n    node c gen WLs\n    =======> gen latest all WLs for autocomplete command feature\n    ////////////////////////// Small Task ////////////////////////////////\n    node c bkimg HANANA\n    =======> copy Images/ to Images_WLs/Images_HANANA (backup only or commit)\n    node c h 23\n    =======> copy header23.aspx to deploy folder\n    node c d 21\n    =======>  copy default23.aspx to deploy folder\n    node c dh 23\n    =======> copy Default23.aspx and Header23.aspx to deploy folder\n    node c dhm 23\n    =======> copy Default23.aspx, Header23.aspx & Main.aspx to deploy folder\n    node dm 23 \n    =======> copy Default23.aspx & Main.aspx to deploy folder\n    node c m\n    =======> copy Main.aspx to deploy folder\n    node c lr\n    node c l\n    node c r\n    =======> copy Left.aspx and Right.aspx to deploy folder\n    node c dw\n    node c deposit\n    node c withdraw\n    =======> copy ReqCredit1.aspx(Deposit) and WashCredit1.aspx(Withdraw) to deploy folder\n    node c hcl\n    node c h\n    node c c\n    node c login.js\n    =======> copy header.js & common.js & login.js to deploy folder\n    node c br/BettingRulesWL\n    =======> copy BettingRulesWL.aspx to deploy folder\n    node c bruc/BettingRulesWLUC\n    =======> copy BettingRulesWLUC.ascx to deploy folder\n    node c header.css\n    =======> copy Images/theme/v1/header.css to deploy folder\n    ////////////////////////// Folder, Zip ////////////////////////////////\n    node c o\n    =======> open deploy folder\n    node c z\n    =======> zip deploy folder \n    /////////////////////11111111111111111111111111111///// Check Name, Number new WL /////////////////\n    node c number HDPBET\n    node c num HDPBET\n    node c n HDPBET  \n    =======> Check info of HDPBET (comtype, header, default number, prefix)\n    node c number 129\n    node c num 129\n    node c n 129\n    =======> Check info of WL have default/ header 129 (comtype, header, default number, prefix)\n    node c number 129 o\n    node c number HDPBET o\n    =======> open header/default number by Visual Studio \n    node c index\n    =======> copy images/theme/v1/index.html to deployer folder\n    node c seo 97\n    =======> copy SEO/DM97.ascx to deployer folder\n    node c ft 97\n    =======> copy SEO/FT97.ascx to deployer folder\n    node c reg1\n    =======> copy _View/Register1.aspxto deployer folder\n    node c reg2\n    =======> copy _View/Register1.aspxto deployer folder\n    node c panel\n    =======> copy _Bet/Panel.aspx to deployer folder\n    node c ct 123\n    =======> Check info of comtype number = 123\n            ")}switch(process.argv[2]){case"h":case"d":case"dh":case"dm":case"dmh":"o"==process.argv[4]||"O"==process.argv[4]?require("child_process").exec('start "" "'+p+'"'):"z"===process.argv[4]||"Z"===process.argv[4]?require("child_process").exec('start "" "'+i+'\\DeployerZIP.cmd"'):"oz"!==process.argv[4]&&"OZ"!==process.argv[4]&&"oZ"!==process.argv[4]&&"Oz"!==process.argv[4]||(require("child_process").exec('start "" "'+p+'"'),require("child_process").exec('start "" "'+i+'\\DeployerZIP.cmd"'));break;case"l":case"login.js":case"r":case"lr":case"m":case"dw":case"br":case"hcl":case"header.css":case"index":case"bruc":case"seo":case"ft":case"reg1":case"reg2":case"panel":"o"==process.argv[3]||"O"==process.argv[3]?require("child_process").exec('start "" "'+p+'"'):"z"===process.argv[3]||"Z"===process.argv[3]?require("child_process").exec('start "" "'+i+'\\DeployerZIP.cmd"'):"oz"!==process.argv[3]&&"OZ"!==process.argv[3]&&"oZ"!==process.argv[3]&&"Oz"!==process.argv[3]||(require("child_process").exec('start "" "'+p+'"'),require("child_process").exec('start "" "'+i+'\\DeployerZIP.cmd"'))}}}()}();